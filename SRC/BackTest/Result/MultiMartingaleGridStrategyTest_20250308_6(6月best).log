说明：
1.标的是6月份，认购和认沽
2.开始日期是12月1日，结束日期是3月7日。
3.最佳参数组合price_interval=0.14, take_profit_ratio=0.23

context.symbol_list = [ # 6月
    'SHSE.10008546',
    'SHSE.10008555'
]

run(strategy_id='95eadb57-f0cb-11ef-b05b-80304917db79',
    filename=(os.path.basename(__file__)),
    mode=MODE_BACKTEST,
    token='6860051c58995ae01c30a27d5b72000bababa8e6',
    backtest_start_time='2024-12-01 09:31:00',
    backtest_end_time='2025-03-07 15:00:00',
    backtest_adjust=ADJUST_NONE,
    backtest_initial_cash=45000,
    backtest_commission_unit=4.5,
    backtest_slippage_ratio=0.0001,
    backtest_marginfloat_ratio1=0.2,
    backtest_marginfloat_ratio2=0.4,
    backtest_match_mode=0)

base_investment=1500,  # 基准投资金额（元）
multiplier=2,  # 加仓倍数
max_layers=9,  # 最大加仓层数
price_interval=0.14,  # 价格间隔3%。当加仓倍数是2时，平均成本下降约为价格间隔的一半。
take_profit_ratio=0.23,  # 止盈比例（2%）
stop_loss_ratio=0.30,  # 总亏损止损20%
base_shares=1,  # 标的下单的最小数量（手或张）
base_volume=10000,  # 标的每手或每张代表的交易数量
enable_short=False,  # 是否启用做空


D:\Workplace-Pycharm\.venv\Scripts\python.exe D:\Workplace-Pycharm\QuantitativeTransaction\SRC\sq\test\test_gm\for159869\MultiMartingaleGridStrategyTest.py
----------------------------------------
python sdk version: 3.0.168
c sdk version: 3.7.4
----------------------------------------
Symbol List: ['SHSE.10008546', 'SHSE.10008555']
current position:
		 SHSE.10008546 , position long. now: 2024-12-01 09:31:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
		 SHSE.10008555 , position long. now: 2024-12-01 09:31:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
Base price:
		 SHSE.10008546 , base_price: 0.1739 ,  2024-12-02 09:31:00+08:00
Base price:
		 SHSE.10008555 , base_price: 0.1833 ,  2024-12-02 09:31:00+08:00
Long，Buy 1st: SHSE.10008555 ,  2024-12-10 09:31:00+08:00 , new_shares: 1 , price: 0.14 , invest_amount: 0.14
current position:
		 SHSE.10008546 , position long. now: 2024-12-10 09:31:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
		 SHSE.10008555 , position long. now: 2024-12-10 09:31:00+08:00 , long_shares: 1 , long_avg_cost: 0.1499 , final_amount: 1499.00
Long，Take profit:  SHSE.10008555 ,  2024-12-13 10:32:00+08:00 , profit ratio: 0.23148765843895916 , price: 0.1846
Long，Close: SHSE.10008555 ,  2024-12-13 10:32:00+08:00 , long_shares: 1 , long_avg_cost: 0.1499 , total_amount: 1499.00
current position:
		 SHSE.10008546 , position long. now: 2024-12-13 10:32:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
		 SHSE.10008555 , position long. now: 2024-12-13 10:32:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
Long，Buy 1st: SHSE.10008555 ,  2024-12-23 11:07:00+08:00 , new_shares: 1 , price: 0.1493 , invest_amount: 0.1493
current position:
		 SHSE.10008546 , position long. now: 2024-12-23 11:07:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
		 SHSE.10008555 , position long. now: 2024-12-23 11:07:00+08:00 , long_shares: 1 , long_avg_cost: 0.1487 , final_amount: 1487.00
Long，Buy more: SHSE.10008555 ,  2024-12-30 14:05:00+08:00 , new_shares: 2 , price: 0.1278 , invest_amount: 0.2556
current position:
		 SHSE.10008546 , position long. now: 2024-12-30 14:05:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
		 SHSE.10008555 , position long. now: 2024-12-30 14:05:00+08:00 , long_shares: 3 , long_avg_cost: 0.1343 , final_amount: 4029.00
Long，Buy 1st: SHSE.10008546 ,  2025-01-02 10:03:00+08:00 , new_shares: 1 , price: 0.1495 , invest_amount: 0.1495
current position:
		 SHSE.10008546 , position long. now: 2025-01-02 10:03:00+08:00 , long_shares: 1 , long_avg_cost: 0.1492 , final_amount: 1492.00
		 SHSE.10008555 , position long. now: 2025-01-02 10:03:00+08:00 , long_shares: 3 , long_avg_cost: 0.1343 , final_amount: 4029.00
Long，Take profit:  SHSE.10008555 ,  2025-01-02 10:21:00+08:00 , profit ratio: 0.2516753536857781 , price: 0.1681
Long，Close: SHSE.10008555 ,  2025-01-02 10:21:00+08:00 , long_shares: 3 , long_avg_cost: 0.1343 , total_amount: 4029.00
current position:
		 SHSE.10008546 , position long. now: 2025-01-02 10:21:00+08:00 , long_shares: 1 , long_avg_cost: 0.1492 , final_amount: 1492.00
		 SHSE.10008555 , position long. now: 2025-01-02 10:21:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
Long，Buy more: SHSE.10008546 ,  2025-01-02 14:18:00+08:00 , new_shares: 2 , price: 0.1283 , invest_amount: 0.2566
current position:
		 SHSE.10008546 , position long. now: 2025-01-02 14:18:00+08:00 , long_shares: 3 , long_avg_cost: 0.1361 , final_amount: 4083.00
		 SHSE.10008555 , position long. now: 2025-01-02 14:18:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
Long，Buy more: SHSE.10008546 ,  2025-01-06 09:42:00+08:00 , new_shares: 5 , price: 0.1148 , invest_amount: 0.574
current position:
		 SHSE.10008546 , position long. now: 2025-01-06 09:42:00+08:00 , long_shares: 8 , long_avg_cost: 0.1229 , final_amount: 9832.00
		 SHSE.10008555 , position long. now: 2025-01-06 09:42:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
Long，Buy more: SHSE.10008546 ,  2025-01-08 11:16:00+08:00 , new_shares: 11 , price: 0.105 , invest_amount: 1.155
current position:
		 SHSE.10008546 , position long. now: 2025-01-08 11:16:00+08:00 , long_shares: 19 , long_avg_cost: 0.1126 , final_amount: 21394.00
		 SHSE.10008555 , position long. now: 2025-01-08 11:16:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
Long，Buy more: SHSE.10008546 ,  2025-01-13 09:33:00+08:00 , new_shares: 26 , price: 0.0918 , invest_amount: 2.3868
current position:
		 SHSE.10008546 , position long. now: 2025-01-13 09:33:00+08:00 , long_shares: 45 , long_avg_cost: 0.1006 , final_amount: 45270.00
		 SHSE.10008555 , position long. now: 2025-01-13 09:33:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
Long，Take profit:  SHSE.10008546 ,  2025-01-20 10:33:00+08:00 , profit ratio: 0.23459244532803192 , price: 0.1242
Long，Close: SHSE.10008546 ,  2025-01-20 10:33:00+08:00 , long_shares: 45 , long_avg_cost: 0.1006 , total_amount: 45270.00
current position:
		 SHSE.10008546 , position long. now: 2025-01-20 10:33:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
		 SHSE.10008555 , position long. now: 2025-01-20 10:33:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
Long，Buy 1st: SHSE.10008546 ,  2025-01-20 10:33:00+08:00 , new_shares: 1 , price: 0.1242 , invest_amount: 0.1242
current position:
		 SHSE.10008546 , position long. now: 2025-01-20 10:33:00+08:00 , long_shares: 1 , long_avg_cost: 0.1236 , final_amount: 1236.00
		 SHSE.10008555 , position long. now: 2025-01-20 10:33:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
Long，Buy more: SHSE.10008546 ,  2025-01-21 14:33:00+08:00 , new_shares: 2 , price: 0.105 , invest_amount: 0.21
current position:
		 SHSE.10008546 , position long. now: 2025-01-21 14:33:00+08:00 , long_shares: 3 , long_avg_cost: 0.1127 , final_amount: 3381.00
		 SHSE.10008555 , position long. now: 2025-01-21 14:33:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
Long，Buy more: SHSE.10008546 ,  2025-01-22 09:59:00+08:00 , new_shares: 6 , price: 0.0957 , invest_amount: 0.5741999999999999
current position:
		 SHSE.10008546 , position long. now: 2025-01-22 09:59:00+08:00 , long_shares: 9 , long_avg_cost: 0.1024 , final_amount: 9216.00
		 SHSE.10008555 , position long. now: 2025-01-22 09:59:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
Long，Buy more: SHSE.10008546 ,  2025-02-05 10:00:00+08:00 , new_shares: 13 , price: 0.0879 , invest_amount: 1.1427
current position:
		 SHSE.10008546 , position long. now: 2025-02-05 10:00:00+08:00 , long_shares: 22 , long_avg_cost: 0.0922 , final_amount: 20284.00
		 SHSE.10008555 , position long. now: 2025-02-05 10:00:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
Long，Buy more: SHSE.10008546 ,  2025-02-06 09:38:00+08:00 , new_shares: 30 , price: 0.0791 , invest_amount: 2.373
current position:
		 SHSE.10008546 , position long. now: 2025-02-06 09:38:00+08:00 , long_shares: 52 , long_avg_cost: 0.0847 , final_amount: 44044.00
		 SHSE.10008555 , position long. now: 2025-02-06 09:38:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
Long，Buy 1st: SHSE.10008555 ,  2025-02-07 13:25:00+08:00 , new_shares: 1 , price: 0.15 , invest_amount: 0.15
current position:
		 SHSE.10008546 , position long. now: 2025-02-07 13:25:00+08:00 , long_shares: 52 , long_avg_cost: 0.0847 , final_amount: 44044.00
		 SHSE.10008555 , position long. now: 2025-02-07 13:25:00+08:00 , long_shares: 1 , long_avg_cost: 0.1481 , final_amount: 1481.00
Long，Take profit:  SHSE.10008546 ,  2025-02-07 13:26:00+08:00 , profit ratio: 0.270365997638725 , price: 0.1076
Long，Close: SHSE.10008546 ,  2025-02-07 13:26:00+08:00 , long_shares: 52 , long_avg_cost: 0.0847 , total_amount: 44044.00
current position:
		 SHSE.10008546 , position long. now: 2025-02-07 13:26:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
		 SHSE.10008555 , position long. now: 2025-02-07 13:26:00+08:00 , long_shares: 1 , long_avg_cost: 0.1481 , final_amount: 1481.00
Long，Buy 1st: SHSE.10008546 ,  2025-02-07 13:26:00+08:00 , new_shares: 1 , price: 0.1076 , invest_amount: 0.1076
current position:
		 SHSE.10008546 , position long. now: 2025-02-07 13:26:00+08:00 , long_shares: 1 , long_avg_cost: 0.1068 , final_amount: 1068.00
		 SHSE.10008555 , position long. now: 2025-02-07 13:26:00+08:00 , long_shares: 1 , long_avg_cost: 0.1481 , final_amount: 1481.00
Long，Buy more: SHSE.10008546 ,  2025-02-07 14:13:00+08:00 , new_shares: 3 , price: 0.0912 , invest_amount: 0.2736
current position:
		 SHSE.10008546 , position long. now: 2025-02-07 14:13:00+08:00 , long_shares: 4 , long_avg_cost: 0.0948 , final_amount: 3792.00
		 SHSE.10008555 , position long. now: 2025-02-07 14:13:00+08:00 , long_shares: 1 , long_avg_cost: 0.1481 , final_amount: 1481.00
Long，Buy more: SHSE.10008555 ,  2025-02-13 09:47:00+08:00 , new_shares: 2 , price: 0.1264 , invest_amount: 0.2528
current position:
		 SHSE.10008546 , position long. now: 2025-02-13 09:47:00+08:00 , long_shares: 4 , long_avg_cost: 0.0948 , final_amount: 3792.00
		 SHSE.10008555 , position long. now: 2025-02-13 09:47:00+08:00 , long_shares: 3 , long_avg_cost: 0.135 , final_amount: 4050.00
Long，Buy more: SHSE.10008555 ,  2025-02-14 14:40:00+08:00 , new_shares: 5 , price: 0.1156 , invest_amount: 0.578
current position:
		 SHSE.10008546 , position long. now: 2025-02-14 14:40:00+08:00 , long_shares: 4 , long_avg_cost: 0.0948 , final_amount: 3792.00
		 SHSE.10008555 , position long. now: 2025-02-14 14:40:00+08:00 , long_shares: 8 , long_avg_cost: 0.1225 , final_amount: 9800.00
Long，Buy more: SHSE.10008555 ,  2025-02-21 10:41:00+08:00 , new_shares: 11 , price: 0.1053 , invest_amount: 1.1583
current position:
		 SHSE.10008546 , position long. now: 2025-02-21 10:41:00+08:00 , long_shares: 4 , long_avg_cost: 0.0948 , final_amount: 3792.00
		 SHSE.10008555 , position long. now: 2025-02-21 10:41:00+08:00 , long_shares: 19 , long_avg_cost: 0.1125 , final_amount: 21375.00
Long，Take profit:  SHSE.10008546 ,  2025-02-21 13:02:00+08:00 , profit ratio: 0.23101265822784814 , price: 0.1167
Long，Close: SHSE.10008546 ,  2025-02-21 13:02:00+08:00 , long_shares: 4 , long_avg_cost: 0.0948 , total_amount: 3792.00
current position:
		 SHSE.10008546 , position long. now: 2025-02-21 13:02:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
		 SHSE.10008555 , position long. now: 2025-02-21 13:02:00+08:00 , long_shares: 19 , long_avg_cost: 0.1125 , final_amount: 21375.00
Long，Buy 1st: SHSE.10008546 ,  2025-02-21 13:02:00+08:00 , new_shares: 1 , price: 0.1167 , invest_amount: 0.1167
current position:
		 SHSE.10008546 , position long. now: 2025-02-21 13:02:00+08:00 , long_shares: 1 , long_avg_cost: 0.1162 , final_amount: 1162.00
		 SHSE.10008555 , position long. now: 2025-02-21 13:02:00+08:00 , long_shares: 19 , long_avg_cost: 0.1125 , final_amount: 21375.00
Long，Buy more: SHSE.10008546 ,  2025-02-25 09:32:00+08:00 , new_shares: 3 , price: 0.0978 , invest_amount: 0.2934
current position:
		 SHSE.10008546 , position long. now: 2025-02-25 09:32:00+08:00 , long_shares: 4 , long_avg_cost: 0.1023 , final_amount: 4092.00
		 SHSE.10008555 , position long. now: 2025-02-25 09:32:00+08:00 , long_shares: 19 , long_avg_cost: 0.1125 , final_amount: 21375.00
Long，Buy more: SHSE.10008546 ,  2025-02-25 14:36:00+08:00 , new_shares: 6 , price: 0.0874 , invest_amount: 0.5244
current position:
		 SHSE.10008546 , position long. now: 2025-02-25 14:36:00+08:00 , long_shares: 10 , long_avg_cost: 0.094 , final_amount: 9400.00
		 SHSE.10008555 , position long. now: 2025-02-25 14:36:00+08:00 , long_shares: 19 , long_avg_cost: 0.1125 , final_amount: 21375.00
Long，Buy more: SHSE.10008555 ,  2025-02-28 09:43:00+08:00 , new_shares: 24 , price: 0.0967 , invest_amount: 2.3207999999999998
current position:
		 SHSE.10008546 , position long. now: 2025-02-28 09:43:00+08:00 , long_shares: 10 , long_avg_cost: 0.094 , final_amount: 9400.00
		 SHSE.10008555 , position long. now: 2025-02-28 09:43:00+08:00 , long_shares: 43 , long_avg_cost: 0.103 , final_amount: 44290.00
Long，Buy more: SHSE.10008546 ,  2025-03-03 14:08:00+08:00 , new_shares: 14 , price: 0.0806 , invest_amount: 1.1284
current position:
		 SHSE.10008546 , position long. now: 2025-03-03 14:08:00+08:00 , long_shares: 24 , long_avg_cost: 0.0858 , final_amount: 20592.00
		 SHSE.10008555 , position long. now: 2025-03-03 14:08:00+08:00 , long_shares: 43 , long_avg_cost: 0.103 , final_amount: 44290.00
Long，Take profit:  SHSE.10008555 ,  2025-03-03 14:27:00+08:00 , profit ratio: 0.23300970873786417 , price: 0.127
Long，Close: SHSE.10008555 ,  2025-03-03 14:27:00+08:00 , long_shares: 43 , long_avg_cost: 0.103 , total_amount: 44290.00
current position:
		 SHSE.10008546 , position long. now: 2025-03-03 14:27:00+08:00 , long_shares: 24 , long_avg_cost: 0.0858 , final_amount: 20592.00
		 SHSE.10008555 , position long. now: 2025-03-03 14:27:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
Long，Buy 1st: SHSE.10008555 ,  2025-03-03 14:27:00+08:00 , new_shares: 1 , price: 0.127 , invest_amount: 0.127
current position:
		 SHSE.10008546 , position long. now: 2025-03-03 14:27:00+08:00 , long_shares: 24 , long_avg_cost: 0.0858 , final_amount: 20592.00
		 SHSE.10008555 , position long. now: 2025-03-03 14:27:00+08:00 , long_shares: 1 , long_avg_cost: 0.1264 , final_amount: 1264.00
Long，Buy more: SHSE.10008546 ,  2025-03-04 09:39:00+08:00 , new_shares: 32 , price: 0.0729 , invest_amount: 2.3328
current position:
		 SHSE.10008546 , position long. now: 2025-03-04 09:39:00+08:00 , long_shares: 56 , long_avg_cost: 0.0782 , final_amount: 43792.00
		 SHSE.10008555 , position long. now: 2025-03-04 09:39:00+08:00 , long_shares: 1 , long_avg_cost: 0.1264 , final_amount: 1264.00
Long，Buy more: SHSE.10008555 ,  2025-03-06 09:31:00+08:00 , new_shares: 2 , price: 0.1053 , invest_amount: 0.2106
current position:
		 SHSE.10008546 , position long. now: 2025-03-06 09:31:00+08:00 , long_shares: 56 , long_avg_cost: 0.0782 , final_amount: 43792.00
		 SHSE.10008555 , position long. now: 2025-03-06 09:31:00+08:00 , long_shares: 3 , long_avg_cost: 0.1113 , final_amount: 3339.00
Long，Take profit:  SHSE.10008546 ,  2025-03-06 10:03:00+08:00 , profit ratio: 0.24040920716112527 , price: 0.097
Long，Close: SHSE.10008546 ,  2025-03-06 10:03:00+08:00 , long_shares: 56 , long_avg_cost: 0.0782 , total_amount: 43792.00
current position:
		 SHSE.10008546 , position long. now: 2025-03-06 10:03:00+08:00 , long_shares: 0 , long_avg_cost: 0.0 , final_amount: 0.00
		 SHSE.10008555 , position long. now: 2025-03-06 10:03:00+08:00 , long_shares: 3 , long_avg_cost: 0.1113 , final_amount: 3339.00
Long，Buy 1st: SHSE.10008546 ,  2025-03-06 10:03:00+08:00 , new_shares: 1 , price: 0.097 , invest_amount: 0.097
current position:
		 SHSE.10008546 , position long. now: 2025-03-06 10:03:00+08:00 , long_shares: 1 , long_avg_cost: 0.0972 , final_amount: 972.00
		 SHSE.10008555 , position long. now: 2025-03-06 10:03:00+08:00 , long_shares: 3 , long_avg_cost: 0.1113 , final_amount: 3339.00
Long，Buy more: SHSE.10008555 ,  2025-03-06 10:08:00+08:00 , new_shares: 6 , price: 0.0956 , invest_amount: 0.5736
current position:
		 SHSE.10008546 , position long. now: 2025-03-06 10:08:00+08:00 , long_shares: 1 , long_avg_cost: 0.0972 , final_amount: 972.00
		 SHSE.10008555 , position long. now: 2025-03-06 10:08:00+08:00 , long_shares: 9 , long_avg_cost: 0.1009 , final_amount: 9081.00
Long，Buy more: SHSE.10008555 ,  2025-03-07 13:21:00+08:00 , new_shares: 13 , price: 0.0864 , invest_amount: 1.1232
current position:
		 SHSE.10008546 , position long. now: 2025-03-07 13:21:00+08:00 , long_shares: 1 , long_avg_cost: 0.0972 , final_amount: 972.00
		 SHSE.10008555 , position long. now: 2025-03-07 13:21:00+08:00 , long_shares: 22 , long_avg_cost: 0.0926 , final_amount: 20372.00
Done! From start, time elapsed: 1.340773344039917 seconds
{'SHSE.10008555', 'SHSE.10008546'} backtest finished:  {'account_id': '95eadb57-f0cb-11ef-b05b-80304917db79', 'pnl_ratio': 0.9393456587693757, 'pnl_ratio_annual': 3.571470473446064, 'sharp_ratio': 4.132617823261455, 'max_drawdown': 0.06287997963136403, 'risk_ratio': 0.2466814575860581, 'open_count': 30, 'close_count': 7, 'win_count': 7, 'win_ratio': 1.0, 'calmar_ratio': 56.79821295082995, 'created_at': datetime.datetime(2025, 3, 8, 14, 41, 43, 119557, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800), 'Asia/Shanghai')), 'updated_at': datetime.datetime(2025, 3, 8, 14, 41, 44, 442283, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800), 'Asia/Shanghai')), 'lose_count': 0}

Process finished with exit code 0






