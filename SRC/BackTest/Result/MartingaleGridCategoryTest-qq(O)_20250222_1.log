context.symbol = 'SHSE.10008527'  # 交易标的
context.frequency = "60s"
context.base_investment = 2000  # 基准投资金额（元）
context.multiplier = 2  # 加仓倍数
context.max_layers = 7  # 最大加仓层数
context.price_interval = 0.15  # 价格间隔3%。当加仓倍数是2时，平均成本下降约为价格间隔的一半。
context.take_profit_ratio = 0.15  # 止盈比例（2%）
context.stop_loss_ratio = 0.30  # 总亏损止损20%
context.base_shares = 1  # 标的下单的最小数量
context.enable_short = False  # 是否启用做空


run(strategy_id='95eadb57-f0cb-11ef-b05b-80304917db79',
        filename=(os.path.basename(__file__)),
        mode=MODE_BACKTEST,
        token='6860051c58995ae01c30a27d5b72000bababa8e6',
        backtest_start_time='2025-01-08 09:31:00',
        backtest_end_time='2025-02-22 15:00:00',
        backtest_adjust=ADJUST_NONE,
        backtest_initial_cash=20000,
        backtest_commission_unit=4.5,
        backtest_slippage_ratio=0.0001,
        backtest_marginfloat_ratio1=0.2,
        backtest_marginfloat_ratio2=0.4,
        backtest_match_mode=0)



D:\Workplace-Pycharm\.venv\Scripts\python.exe "D:\Workplace-Pycharm\QuantitativeTransaction\SRC\sq\test\test_gm\for159869\MartingaleGridCategoryTest-qq(O).py"
----------------------------------------
python sdk version: 3.0.168
c sdk version: 3.7.4
----------------------------------------
SHSE.10008527 , base_price: 0.074 ,  2025-01-08 09:33:00+08:00
Long，Buy 1st: SHSE.10008527 ,  2025-01-08 10:38:00+08:00 , new_shares: 2 , price: 0.0734 , invest_amount: 0.1468
Long，Buy more: SHSE.10008527 ,  2025-01-10 10:04:00+08:00 , new_shares: 6 , price: 0.0619 , invest_amount: 0.37139999999999995
Long，Buy more: SHSE.10008527 ,  2025-01-13 09:31:00+08:00 , new_shares: 15 , price: 0.0532 , invest_amount: 0.7979999999999999
Long，take_profit. profit_ratio: 0.1568150736970066 , price: 0.0662
Long，Close: SHSE.10008527 ,  2025-01-14 10:52:00+08:00 , long_shares: 23 , long_avg_cost: 0.05722608695652173 , total_amount: 1.3161999999999998
Long，Buy 1st: SHSE.10008527 ,  2025-01-14 10:52:00+08:00 , new_shares: 3 , price: 0.0662 , invest_amount: 0.1986
Long，take_profit. profit_ratio: 0.16616314199395787 , price: 0.0772
Long，Close: SHSE.10008527 ,  2025-01-14 14:03:00+08:00 , long_shares: 3 , long_avg_cost: 0.0662 , total_amount: 0.1986
Long，Buy 1st: SHSE.10008527 ,  2025-01-14 14:35:00+08:00 , new_shares: 2 , price: 0.0735 , invest_amount: 0.147
Long，Buy more: SHSE.10008527 ,  2025-01-17 09:34:00+08:00 , new_shares: 6 , price: 0.062 , invest_amount: 0.372
Long，take_profit. profit_ratio: 0.15606936416184963 , price: 0.075
Long，Close: SHSE.10008527 ,  2025-01-17 13:24:00+08:00 , long_shares: 8 , long_avg_cost: 0.064875 , total_amount: 0.519
Long，Buy 1st: SHSE.10008527 ,  2025-01-17 13:40:00+08:00 , new_shares: 2 , price: 0.0734 , invest_amount: 0.1468
Long，Buy more: SHSE.10008527 ,  2025-01-22 09:32:00+08:00 , new_shares: 6 , price: 0.0621 , invest_amount: 0.37260000000000004
Long，Buy more: SHSE.10008527 ,  2025-01-22 09:51:00+08:00 , new_shares: 14 , price: 0.0544 , invest_amount: 0.7615999999999999
Long，take_profit. profit_ratio: 0.19703356752537068 , price: 0.0697
Long，Close: SHSE.10008527 ,  2025-01-23 09:37:00+08:00 , long_shares: 22 , long_avg_cost: 0.05822727272727273 , total_amount: 1.2810000000000001
Long，Buy 1st: SHSE.10008527 ,  2025-01-23 09:37:00+08:00 , new_shares: 2 , price: 0.0697 , invest_amount: 0.1394
Long，Buy more: SHSE.10008527 ,  2025-01-23 11:14:00+08:00 , new_shares: 6 , price: 0.059 , invest_amount: 0.354
Long，take_profit. profit_ratio: 0.16092419943250919 , price: 0.0716
Long，Close: SHSE.10008527 ,  2025-01-24 11:21:00+08:00 , long_shares: 8 , long_avg_cost: 0.061674999999999994 , total_amount: 0.49339999999999995
Long，Buy 1st: SHSE.10008527 ,  2025-01-24 11:21:00+08:00 , new_shares: 2 , price: 0.0716 , invest_amount: 0.1432
Long，Buy more: SHSE.10008527 ,  2025-01-27 11:20:00+08:00 , new_shares: 6 , price: 0.0607 , invest_amount: 0.36419999999999997
Long，Buy more: SHSE.10008527 ,  2025-02-05 09:32:00+08:00 , new_shares: 16 , price: 0.0493 , invest_amount: 0.7888
Long，Buy more: SHSE.10008527 ,  2025-02-05 09:36:00+08:00 , new_shares: 35 , price: 0.0455 , invest_amount: 1.5925
order error, now: 2025-02-05 09:36:00+08:00 , info: 资金不足 可用=12535.398
Long，Buy more: SHSE.10008527 ,  2025-02-05 10:02:00+08:00 , new_shares: 77 , price: 0.0413 , invest_amount: 3.1801000000000004
order error, now: 2025-02-05 10:02:00+08:00 , info: 资金不足 可用=12535.398
Long，Buy more: SHSE.10008527 ,  2025-02-06 09:40:00+08:00 , new_shares: 170 , price: 0.0375 , invest_amount: 6.375
order error, now: 2025-02-06 09:40:00+08:00 , info: 资金不足 可用=12535.398
Long，take_profit. profit_ratio: 0.19018306305147953 , price: 0.0484
Long，Close: SHSE.10008527 ,  2025-02-06 11:00:00+08:00 , long_shares: 306 , long_avg_cost: 0.04066601307189542 , total_amount: 12.4438
Long，Buy 1st: SHSE.10008527 ,  2025-02-06 11:00:00+08:00 , new_shares: 4 , price: 0.0484 , invest_amount: 0.1936
Long，take_profit. profit_ratio: 0.16115702479338848 , price: 0.0562
Long，Close: SHSE.10008527 ,  2025-02-07 11:14:00+08:00 , long_shares: 4 , long_avg_cost: 0.0484 , total_amount: 0.1936
Long，Buy 1st: SHSE.10008527 ,  2025-02-07 11:14:00+08:00 , new_shares: 3 , price: 0.0562 , invest_amount: 0.1686
Long，take_profit. profit_ratio: 0.18683274021352306 , price: 0.0667
Long，Close: SHSE.10008527 ,  2025-02-07 13:26:00+08:00 , long_shares: 3 , long_avg_cost: 0.0562 , total_amount: 0.1686
Long，Buy 1st: SHSE.10008527 ,  2025-02-07 13:26:00+08:00 , new_shares: 2 , price: 0.0667 , invest_amount: 0.1334
Long，Buy more: SHSE.10008527 ,  2025-02-07 13:50:00+08:00 , new_shares: 7 , price: 0.0566 , invest_amount: 0.3962
Long，Buy more: SHSE.10008527 ,  2025-02-07 14:19:00+08:00 , new_shares: 16 , price: 0.0493 , invest_amount: 0.7888
Long，take_profit. profit_ratio: 0.1623938106796117 , price: 0.0613
Long，Close: SHSE.10008527 ,  2025-02-10 10:00:00+08:00 , long_shares: 25 , long_avg_cost: 0.052736 , total_amount: 1.3184
Long，Buy 1st: SHSE.10008527 ,  2025-02-10 10:00:00+08:00 , new_shares: 3 , price: 0.0613 , invest_amount: 0.1839
Long，Buy more: SHSE.10008527 ,  2025-02-11 10:40:00+08:00 , new_shares: 7 , price: 0.0514 , invest_amount: 0.3598
Long，take_profit. profit_ratio: 0.17895898473422833 , price: 0.0641
Long，Close: SHSE.10008527 ,  2025-02-12 14:46:00+08:00 , long_shares: 10 , long_avg_cost: 0.05437000000000001 , total_amount: 0.5437000000000001
Long，Buy 1st: SHSE.10008527 ,  2025-02-12 14:46:00+08:00 , new_shares: 3 , price: 0.0641 , invest_amount: 0.19230000000000003
Long，take_profit. profit_ratio: 0.1606864274570981 , price: 0.0744
Long，Close: SHSE.10008527 ,  2025-02-13 13:41:00+08:00 , long_shares: 3 , long_avg_cost: 0.0641 , total_amount: 0.19230000000000003
Long，Buy 1st: SHSE.10008527 ,  2025-02-13 13:44:00+08:00 , new_shares: 2 , price: 0.0731 , invest_amount: 0.1462
Long，Buy more: SHSE.10008527 ,  2025-02-13 14:45:00+08:00 , new_shares: 6 , price: 0.0613 , invest_amount: 0.3678
Long，take_profit. profit_ratio: 0.1533073929961089 , price: 0.0741
Long，Close: SHSE.10008527 ,  2025-02-17 09:32:00+08:00 , long_shares: 8 , long_avg_cost: 0.06425 , total_amount: 0.514
Long，Buy 1st: SHSE.10008527 ,  2025-02-17 09:45:00+08:00 , new_shares: 2 , price: 0.0728 , invest_amount: 0.1456
Long，Buy more: SHSE.10008527 ,  2025-02-18 14:29:00+08:00 , new_shares: 6 , price: 0.0618 , invest_amount: 0.3708
Long，take_profit. profit_ratio: 0.1541440743609605 , price: 0.0745
Long，Close: SHSE.10008527 ,  2025-02-19 10:35:00+08:00 , long_shares: 8 , long_avg_cost: 0.06455 , total_amount: 0.5164
Long，Buy 1st: SHSE.10008527 ,  2025-02-19 10:41:00+08:00 , new_shares: 2 , price: 0.0738 , invest_amount: 0.1476
Long，Buy more: SHSE.10008527 ,  2025-02-20 09:32:00+08:00 , new_shares: 6 , price: 0.0601 , invest_amount: 0.36060000000000003
Long，take_profit. profit_ratio: 0.1900826446280992 , price: 0.0756
Long，Close: SHSE.10008527 ,  2025-02-21 10:47:00+08:00 , long_shares: 8 , long_avg_cost: 0.063525 , total_amount: 0.5082
Done! From start, time elapsed: 1.5057528018951416 seconds
SHSE.10008527 backtest finished:  {'account_id': '95eadb57-f0cb-11ef-b05b-80304917db79', 'pnl_ratio': 0.5051823676532134, 'pnl_ratio_annual': 4.0975903154093976, 'sharp_ratio': 4.697493597446755, 'max_drawdown': 0.13793190132921862, 'open_count': 28, 'close_count': 14, 'win_count': 13, 'lose_count': 1, 'win_ratio': 0.9285714285714286, 'calmar_ratio': 29.7073430868555, 'created_at': datetime.datetime(2025, 2, 22, 12, 6, 12, 30367, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800), 'Asia/Shanghai')), 'updated_at': datetime.datetime(2025, 2, 22, 12, 6, 13, 524563, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800), 'Asia/Shanghai')), 'risk_ratio': 0.0}

Process finished with exit code 0


